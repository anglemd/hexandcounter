<mat-card class="mx-4 my-4 pt-1 px-3 mat-elevation-z4">
  <div class="row bgBlue p-1 mt-0 mb-4" style="border-radius: 5px">
    <div class="row">
      <div class="col-3">
        <div class="pl-5 py-1 fgAqua" style="font-size: 1.15em">Edit&nbsp;Unit:</div>
      </div>
      <div class="col-6"></div>
      <div class="col-3 px-0"></div>
    </div>
  </div>
  <!-- LABELS - FIRST ROW -->
  <div class="row pb-2">
    <div class="col-2"><ng-container *ngTemplateOutlet="label; context: { text: 'Faction:' }"></ng-container></div>
    <div class="col-3"><ng-container *ngTemplateOutlet="label; context: { text: 'Marker Id:' }"></ng-container></div>
    <div class="col-2"><ng-container *ngTemplateOutlet="label; context: { text: 'Division:' }"></ng-container></div>
    <div class="col-2"><ng-container *ngTemplateOutlet="label; context: { text: 'Name:' }"></ng-container></div>
    <div class="col-3"><ng-container *ngTemplateOutlet="label; context: { text: 'Unit Type:' }"></ng-container></div>
  </div>
  <!-- EDIT CONTROLS - FIRST ROW -->
  <div class="row">
    <!-- UNIT FACTION CONTROL -->
    <div class="col-2">
      <ng-container
        *ngTemplateOutlet="
          enum_select;
          context: { form_control: factionCtrl, enum_list: UnitEditor.factionEnumStrings }
        "
      ></ng-container>
    </div>
    <!-- MARKER ID -->
    <div class="col-3">
      <ng-container *ngTemplateOutlet="text_input; context: { form_control: markerIdCtrl }"></ng-container>
    </div>
    <!-- UNIT DIVISION CONTROL -->
    <div class="col-2">
      <ng-container
        *ngTemplateOutlet="enum_select; context: { form_control: divisionCtrl, enum_list: UnitEditor.divisionNames }"
      ></ng-container>
    </div>

    <!-- UNIT NAME CONTROL -->
    <div class="col-2">
      <ng-container *ngTemplateOutlet="text_input; context: { form_control: nameCtrl }"></ng-container>
    </div>

    <!-- UNIT TYPE CONTROL -->
    <div class="col-3">
      <ng-container
        *ngTemplateOutlet="enum_select; context: { form_control: typeCtrl, enum_list: UnitEditor.unitTypeEnumStrings }"
      ></ng-container>
    </div>
  </div>
  <!-- end first row of controls -->

  <!-- LABELS - SECOND ROW -->
  <!-- LABELS - SECOND ROW -->
  <div class="row pb-2 mt-3">
    <div class="col-4"><ng-container *ngTemplateOutlet="label; context: { text: 'Symbol:' }"></ng-container></div>
    <div class="col-3"><ng-container *ngTemplateOutlet="label; context: { text: '' }"></ng-container></div>
    <div class="col-2"><ng-container *ngTemplateOutlet="label; context: { text: '' }"></ng-container></div>
    <div class="col-3"><ng-container *ngTemplateOutlet="label; context: { text: '' }"></ng-container></div>
  </div>
  <div class="row">
    <div class="col-4">
      <ng-container
        *ngTemplateOutlet="
          enum_select;
          context: { form_control: symbolCtrl, enum_list: UnitEditor.unitSymbolEnumStrings }
        "
      ></ng-container>
    </div>
    <div class="col-3"><ng-container *ngTemplateOutlet="label; context: { text: '' }"></ng-container></div>
    <div class="col-2"><ng-container *ngTemplateOutlet="label; context: { text: '' }"></ng-container></div>
    <div class="col-3"><ng-container *ngTemplateOutlet="label; context: { text: '' }"></ng-container></div>
  </div>
  <!-- END CONTROLS FOR LINE ONE -->
</mat-card>

<!-- DIALOG BUTTONS -->
<div class="row mb-2 px-3">
  <div class="col-6"></div>
  <div class="col-6 text-end">
    <button mat-raised-button class="px-4 py-2 mx-2" [mat-dialog-close]="cloneJson">Save</button>
    <button mat-raised-button class="px-3 py-2 mx-2" mat-dialog-close="">Cancel</button>
  </div>
</div>

<!-- THIS TEMPLATE <enum_select> RENDERS A SELECTION OF ITEMS TO STORE IN UNIT. -->
<ng-template #enum_select let-form_control="form_control" let-enum_list="enum_list">
  <button [mat-menu-trigger-for]="menu" class="btn dropdown-toggle w100 lightBorder">{{ form_control.value }}</button>
  <mat-menu #menu="matMenu">
    <button mat-menu-item *ngFor="let enum_item of enum_list" (click)="onChangeUnitProperty(form_control, enum_item)">
      {{ enum_item }}
    </button>
  </mat-menu>
</ng-template>

<!-- THIS TEMPLATE RENDERS A TEXT INPUT TO STORE TEXT IN UNIT.[unit_property] -->
<ng-template #text_input let-form_control="form_control">
  <input class="form-control" type="text" [formControl]="form_control" (blur)="onTextInputBlur(form_control)" />
</ng-template>
<!-- <input class="XXXXXXXXX" type="text" [formControl]="markerIdCtrl" (blur)="onMarkerIdChange()" /> -->

<!-- THIS TEMPLATE RENDERS A SMALL FONT LABEL  -->
<ng-template #label let-text="text">
  <div class="fgLightGray px-3 labelText">{{ text }}</div>
</ng-template>
