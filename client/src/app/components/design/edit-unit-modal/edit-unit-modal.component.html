<mat-card class="mx-4 my-4 pt-1 px-3 mat-elevation-z4">
  <div class="row bgBlue p-1 mt-0 mb-4" style="border-radius: 5px">
    <div class="row">
      <div class="col-3">
        <div class="pl-5 py-1 fgAqua" style="font-size: 1.15em">Edit&nbsp;Unit:</div>
      </div>
      <div class="col-6"></div>
      <div class="col-3 px-0"></div>
    </div>
  </div>
  <!-- LABELS - FIRST ROW -->
  <div class="row pb-2">
    <div class="col-2"><ng-container *ngTemplateOutlet="label; context: { text: 'Faction:' }"></ng-container></div>
    <div class="col-3"><ng-container *ngTemplateOutlet="label; context: { text: 'Marker Id:' }"></ng-container></div>
    <div class="col-2"><ng-container *ngTemplateOutlet="label; context: { text: 'Division:' }"></ng-container></div>
    <div class="col-2"><ng-container *ngTemplateOutlet="label; context: { text: 'Name:' }"></ng-container></div>
    <div class="col-3"><ng-container *ngTemplateOutlet="label; context: { text: 'Unit Type:' }"></ng-container></div>
  </div>
  <!-- EDIT CONTROLS - FIRST ROW -->
  <div class="row">
    <!-- UNIT FACTION CONTROL -->
    <div class="col-2">
      <ng-container
        *ngTemplateOutlet="enum_select; context: { unit_property: 'faction', enum_list: factionTypes }"
      ></ng-container>
    </div>
    <!-- MARKER ID -->
    <div class="col-3">
      <ng-container
        *ngTemplateOutlet="text_input; context: { blur: onMarkerIdChange(), form_control: markerIdCtrl }"
      ></ng-container>
    </div>
    <!-- UNIT DIVISION CONTROL -->
    <div class="col-2">
      <ng-container
        *ngTemplateOutlet="enum_select; context: { unit_property: 'division', enum_list: divisionNames }"
      ></ng-container>
    </div>

    <!-- UNIT NAME CONTROL -->
    <div class="col-2">
      <ng-container
        *ngTemplateOutlet="text_input; context: { blur: onNameChange(), form_control: nameCtrl }"
      ></ng-container>
    </div>

    <!-- UNIT TYPE CONTROL -->
    <div class="col-3">
      <ng-container
        *ngTemplateOutlet="enum_select; context: { unit_property: 'unitType', enum_list: unitTypes }"
      ></ng-container>
    </div>
  </div>
  <!-- LABELS - SECOND ROW -->
  <!-- LABELS - SECOND ROW -->
  <div class="row pb-2 mt-3">
    <div class="col-4"><ng-container *ngTemplateOutlet="label; context: { text: 'Symbol:' }"></ng-container></div>
    <div class="col-3"><ng-container *ngTemplateOutlet="label; context: { text: '' }"></ng-container></div>
    <div class="col-2"><ng-container *ngTemplateOutlet="label; context: { text: '' }"></ng-container></div>
    <div class="col-3"><ng-container *ngTemplateOutlet="label; context: { text: '' }"></ng-container></div>
  </div>
  <div class="row">
    <div class="col-4">
      <ng-container
        *ngTemplateOutlet="enum_select; context: { unit_property: 'unitSymbol', enum_list: symbolTypes }"
      ></ng-container>
    </div>
    <div class="col-3"><ng-container *ngTemplateOutlet="label; context: { text: '' }"></ng-container></div>
    <div class="col-2"><ng-container *ngTemplateOutlet="label; context: { text: '' }"></ng-container></div>
    <div class="col-3"><ng-container *ngTemplateOutlet="label; context: { text: '' }"></ng-container></div>
  </div>
  <!-- END CONTROLS FOR LINE ONE -->
</mat-card>

<!-- DIALOG BUTTONS -->
<div class="row mb-2 px-3">
  <div class="col-6"></div>
  <div class="col-6 text-end">
    <button mat-raised-button class="px-4 py-2 mx-2" [mat-dialog-close]="cloneJson">Save</button>
    <button mat-raised-button class="px-3 py-2 mx-2" mat-dialog-close="">Cancel</button>
  </div>
</div>

<!-- THIS TEMPLATE RENDERS A SELECTION OF ITEMS TO STORE IN UNIT.[unit_property] -->
<ng-template #enum_select let-unit_property="unit_property" let-enum_list="enum_list">
  <button [mat-menu-trigger-for]="menu" class="btn dropdown-toggle w100 lightBorder">
    {{ unitProperty(unit_property) }}{{ unitApprearanceProperty(unit_property) }}
  </button>
  <mat-menu #menu="matMenu">
    <button mat-menu-item *ngFor="let item of enum_list" (click)="onChangeUnitProperty(unit_property, item)">
      {{ item }}
    </button>
  </mat-menu>
</ng-template>

<!-- THIS TEMPLATE RENDERS A TEXT INPUT TO STORE TEXT IN UNIT.[unit_property] -->
<ng-template #text_input let-blur="blur" let-form_control="form_control">
  <input class="form-control" type="text" [formControl]="form_control" (blur)="(blur)" />
  <!-- <input class="form-control" type="text" [formControl]="markerIdCtrl" (blur)="onMarkerIdChange()" /> -->
</ng-template>

<!-- THIS TEMPLATE RENDERS A SMALL FONT LABEL  -->
<ng-template #label let-text="text">
  <div class="fgLightGray px-3 labelText">{{ text }}</div>
</ng-template>
